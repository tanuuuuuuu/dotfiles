---
name: agent-creator
description: Claude Code サブエージェント（カスタムエージェント）の作成・改善ガイド。「エージェントを作りたい」「サブエージェントを作成」「エージェントを改善」「agent を追加」で使用。新規作成と既存改善の両方に対応。
---

# Agent Creator

サブエージェント（カスタムエージェント）を設計原則に則って作成・改善する。

## ワークフロー

```
1. 要件確認 → スキル vs サブエージェントの判断
2. 設計 → 責務・ツール・モデルを決定
3. 実装 → YAML定義を生成
4. 配置 → 適切な場所に保存
```

## Step 1: 要件確認

ユーザーに以下を確認：

**新規作成の場合:**
- 何をするエージェントか？
- いつ使われるか？（トリガー条件）
- 入出力は何か？

**既存改善の場合:**
- 現在の問題点は？
- 期待する動作との差分は？

### スキル vs サブエージェント判断

| 要件 | 推奨 |
|------|------|
| 大量ファイル読み取り | サブエージェント |
| 知識・ガイドライン参照 | スキル |
| メイン会話と密連携 | スキル |
| 隔離実行が必要 | サブエージェント |
| コンテキスト節約 | サブエージェント |

→ スキルが適切な場合は `/skill-creator` を案内

## Step 2: 設計

### 責務を1つに絞る

```
悪い: コードレビュー + テスト + デプロイ
良い: コードレビュー専用
```

### ツール権限を最小化

| 用途 | 推奨ツール |
|------|-----------|
| 読み取り専用 | Read, Grep, Glob |
| コマンド実行 | Bash, Read |
| 書き込み可能 | Read, Write, Edit, Grep, Glob |

### モデル選択

| モデル | 用途 |
|--------|------|
| haiku | 高速検索・軽い分析 |
| sonnet | バランス型（デフォルト推奨） |
| opus | 複雑な推論 |

### description の書き方

```yaml
# 必須要素
description: [何をするか] + [いつ使うか] + [何を返すか]

# 例
description: コード品質・セキュリティを専門レビュー。PR作成前やコード変更後に使用。具体的な修正案を提示。
```

## Step 3: 実装

基本テンプレート:

```yaml
---
name: <ケバブケース名>
description: <機能> + <トリガー条件> + <出力特徴>
tools: <許可ツール>
disallowedTools: <禁止ツール>
model: <haiku|sonnet|opus>
---

# <エージェント名>

<エージェントへの指示>

## 手順
1. ...
2. ...

## 出力形式
...
```

詳細な仕様 → [yaml-spec.md](references/yaml-spec.md)
実例集 → [examples.md](references/examples.md)

## Step 4: 配置

| 場所 | スコープ |
|------|----------|
| `~/.claude/agents/` | 全プロジェクト共通 |
| `.claude/agents/` | プロジェクト固有 |

## 参考資料

- **設計原則**: [design-principles.md](references/design-principles.md)
- **YAML仕様**: [yaml-spec.md](references/yaml-spec.md)
- **実例集**: [examples.md](references/examples.md)
